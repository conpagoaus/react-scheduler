(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{Scheduler:()=>Fe});const n=require("react/jsx-runtime"),r=require("react"),a=require("date-fns"),s=(e,t,n)=>{var r;const a=(null===(r=e.config)||void 0===r?void 0:r.multiple)&&!Array.isArray((null==n?void 0:n[e.name])||e.default),s=a?t?[t]:[]:t;return{value:s,validity:a?s.length:s}},i=(e,t,n,r)=>{var a;const s=n.idField,i=r.find((e=>e.name===s)),o=!!(null===(a=null==i?void 0:i.config)||void 0===a?void 0:a.multiple),l=[];for(const r of e){const e=o&&!Array.isArray(r[s])?[r[s]]:r[s];(o?e.includes(t[s]):e===t[s])&&l.push(Object.assign(Object.assign({},r),{color:r.color||t[n.colorField||""]}))}return l},o=(e,t)=>Math.ceil(e)/t,l=(e,t)=>Math.max(e/t,60),d=require("date-fns/locale/en-US");var c=e.n(d);const u={height:600,month:{weekDays:[0,1,2,3,4,5],weekStartOn:6,startHour:9,endHour:17},week:{weekDays:[0,1,2,3,4,5],weekStartOn:6,startHour:9,endHour:17,step:60},day:{startHour:9,endHour:17,step:60},view:"week",selectedDate:new Date,events:[],remoteEvents:void 0,fields:[],loading:void 0,customEditor:void 0,onConfirm:void 0,onDelete:void 0,viewerExtraComponent:void 0,resources:[],resourceFields:{idField:"assignee",textField:"text",subTextField:"subtext",avatarField:"avatar",colorField:"color"},recourseHeaderComponent:void 0,resourceViewMode:"default",direction:"ltr",dialogMaxWidth:"md",locale:c(),deletable:!0,editable:!0,translations:{navigation:{month:"Month",week:"Week",day:"Day",today:"Today"},form:{addTitle:"Add Event",editTitle:"Edit Event",confirm:"Confirm",delete:"Delete",cancel:"Cancel"},event:{title:"Title",start:"Start",end:"End"},moreEvents:"More..."},hourFormat:"12",draggable:!0,extraAction:void 0},h=(0,r.createContext)(Object.assign(Object.assign({},u),{mounted:!1,dialog:!1,selectedRange:void 0,selectedEvent:void 0,selectedResource:void 0,handleState:()=>{},getViews:()=>[],triggerDialog:()=>{},triggerLoading:()=>{},handleGotoDay:()=>{},confirmEvent:()=>{},onDrop:()=>{}})),g=(e,t)=>{switch(t.type){case"updateProps":return Object.assign(Object.assign({},e),t.payload);case"set":const{name:n,value:r}=t.payload;return Object.assign(Object.assign({},e),{[n]:r});case"triggerDialog":const a=t.payload.selected;return Object.assign(Object.assign({},e),{dialog:t.payload.status,selectedRange:(null==a?void 0:a.event_id)?null:a,selectedEvent:(null==a?void 0:a.event_id)?a:null});case"triggerLoading":return Object.assign(Object.assign({},e),{loading:t.payload});default:return e}};const p=({initial:e,children:t})=>{const{events:i,remoteEvents:o,resources:l,resourceViewMode:d,month:c,week:p,day:y,fields:v,showAddDialog:m,locale:f,direction:j,loading:x,onEventDrop:b,selectedDate:O}=e,[w,_]=(0,r.useReducer)(g,(e=>{const t=e.view&&e[e.view]?e.view:(e=>{if(e.month)return"month";if(e.week)return"week";if(e.day)return"day";throw new Error("No views were selected")})(e);return Object.assign(Object.assign({},e),{view:t,dialog:!1,mounted:!1,selectedRange:void 0,fields:[...u.fields,...e.fields||[]]})})(e)),D=(e,t)=>{_({type:"set",payload:{name:t,value:e}})};(0,r.useEffect)((()=>{w.mounted?_({type:"updateProps",payload:{events:i,remoteEvents:o,selectedDate:O,resources:l,resourceViewMode:d,month:c,week:p,day:y,showAddDialog:m,fields:v,locale:f,direction:j,loading:x}}):D(!0,"mounted")}),[i,o,O,l,d,c,p,y,m,v,f,j,x]);const k=(e,t)=>{let n;n="edit"===t?w.events.map((t=>t.event_id===e.event_id?Object.assign(Object.assign({},t),e):t)):[...w.events,e],D(n,"events")},C=()=>(e=>{const t=[];return e.month&&t.push("month"),e.week&&t.push("week"),e.day&&t.push("day"),t})(w),M=e=>{void 0===x&&_({type:"triggerLoading",payload:e})};return(0,n.jsx)(h.Provider,Object.assign({value:Object.assign(Object.assign({},w),{handleState:D,getViews:C,triggerDialog:(e,t)=>{!1!==m&&_({type:"triggerDialog",payload:{status:e,selected:t}})},triggerLoading:M,handleGotoDay:e=>{const t=C();t.includes("day")?(D("day","view"),D(e,"selectedDate")):t.includes("week")?(D("week","view"),D(e,"selectedDate")):console.warn("No Day/Week views available")},confirmEvent:k,onDrop:(e,t,n,r)=>{return i=void 0,o=void 0,d=function*(){var i;const o=w.events.find((t=>"number"==typeof t.event_id?t.event_id===+e:t.event_id===e)),l=w.fields.find((e=>e.name===n)),d=!!(null===(i=null==l?void 0:l.config)||void 0===i?void 0:i.multiple);let c=r;if(l){const e=o[n],i=s(l,e,o).value;if(d)if(i.includes(r)){if((0,a.isEqual)(o.start,t))return;c=i}else c=i.length>1?[...i,r]:[r]}if((0,a.isEqual)(o.start,t)&&(!c||!d&&c===o[n]))return;const u=(0,a.differenceInMinutes)(o.end,o.start),h=Object.assign(Object.assign({},o),{start:t,end:(0,a.addMinutes)(t,u),[n]:c||""});if(!b||"function"!=typeof b)return k(h,"edit");try{M(!0);const e=yield b(t,h,o);e&&k(e,"edit")}finally{M(!1)}},new((l=void 0)||(l=Promise))((function(e,t){function n(e){try{a(d.next(e))}catch(e){t(e)}}function r(e){try{a(d.throw(e))}catch(e){t(e)}}function a(t){var a;t.done?e(t.value):(a=t.value,a instanceof l?a:new l((function(e){e(a)}))).then(n,r)}a((d=d.apply(i,o||[])).next())}));var i,o,l,d}})},{children:t}))},y=require("@mui/material"),v=({date:e,onClick:t,locale:r})=>(0,n.jsxs)("div",{children:[(0,n.jsx)(y.Typography,Object.assign({style:{fontWeight:(0,a.isToday)(e)?"bold":"inherit"},color:(0,a.isToday)(e)?"primary":"inherit",className:t?"rs__hover__op":"",onClick:n=>{n.stopPropagation(),t&&t(e)}},{children:(0,a.format)(e,"dd",{locale:r})})),(0,n.jsx)(y.Typography,Object.assign({color:(0,a.isToday)(e)?"primary":"inherit",style:{fontWeight:(0,a.isToday)(e)?"bold":"inherit",fontSize:11}},{children:(0,a.format)(e,"eee",{locale:r})}))]}),m=()=>(0,r.useContext)(h),f=require("@mui/icons-material/ArrowRightRounded");var j=e.n(f);const x=require("@mui/icons-material/ArrowLeftRounded");var b=e.n(x);const O=require("@mui/icons-material/EventNoteRounded");var w=e.n(O);const _=require("@mui/icons-material/ClearRounded");var D=e.n(_);const k=require("@mui/icons-material/SupervisorAccountRounded");var C=e.n(k);const M=(0,y.styled)("div")((({theme:e,dialog:t})=>({position:"relative",overflow:"hidden","& .rs__table_loading":{background:t?"":(0,y.alpha)(e.palette.background.paper,.4),position:"absolute",left:0,right:0,top:0,bottom:0,zIndex:999999,"& > span":{height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center","& >span":{marginBottom:15}}}}))),T=(0,y.styled)("div")((({resource_count:e})=>({position:"relative",display:"grid",gridTemplateColumns:`repeat(${e}, 1fr)`,width:"100%",overflowX:"auto",overflowY:"hidden"}))),S=(0,y.styled)("div")((({days:e,indent:t="1",theme:n})=>({position:"relative",display:"grid",gridTemplateColumns:+t>0?`10% repeat(${e}, 1fr)`:`repeat(${e}, 1fr)`,[n.breakpoints.down("sm")]:{gridTemplateColumns:+t>0?`30px repeat(${e}, 1fr)`:""},"&:first-of-type":{borderStyle:"solid",borderColor:"#eee",borderWidth:"0 1px 1px 0"},"& .rs__cell":{position:"relative","&.rs__header > :first-of-type":{padding:"2px 5px"},"&.rs__time":{display:"flex",alignItems:"center",justifyContent:"center",[n.breakpoints.down("sm")]:{writingMode:"vertical-rl"}},borderColor:"#eee",borderWidth:"1px 0px 0px 1px",borderStyle:"solid","& > button":{width:"100%",height:"100%",borderRadius:0,cursor:"pointer","&:hover":{background:(0,y.alpha)(n.palette.primary.main,.1)}},"& .rs__event__item":{position:"absolute",zIndex:1},"& .rs__multi_day":{position:"absolute",zIndex:1,textOverflow:"ellipsis"},"& .rs__block_col":{display:"block",position:"relative"},"& .rs__hover__op":{cursor:"pointer","&:hover":{opacity:.7,textDecoration:"underline"}}}}))),I=(0,y.styled)("div")((({theme:e})=>({width:"100%",maxWidth:400,"& > div":{padding:"5px 10px","& .rs__popper_actions":{display:"flex",alignItems:"center",justifyContent:"space-between","& .MuiIconButton-root":{color:e.palette.primary.contrastText}}}}))),F=(0,y.styled)("div")((({theme:e})=>({display:"inherit","& .MuiIconButton-root":{color:e.palette.primary.contrastText},"& .MuiButton-root":{"&.delete":{color:e.palette.error.main},"&.cancel":{color:e.palette.action.disabled}}}))),E=(0,y.styled)("div")((({theme:e})=>({position:"absolute",zIndex:e.zIndex.tooltip,width:"100%",display:"flex","& > div:first-of-type":{height:12,width:12,borderRadius:"50%",background:e.palette.error.light,marginLeft:-6,marginTop:-5},"& > div:last-of-type":{borderTop:`solid 2px ${e.palette.error.light}`,width:"100%"}}))),$=require("@mui/icons-material/DeleteRounded");var P=e.n($);const H=require("@mui/icons-material/EditRounded");var W=e.n(H);const R=({event:e,onDelete:t,onEdit:a,direction:s,editable:i,deletable:o})=>{const{translations:l}=m(),[d,c]=(0,r.useState)(!1),u=()=>{if(!d)return c(!0);t()},h=(0,r.useMemo)((()=>void 0!==e.deletable?e.deletable:o),[o,e.deletable]),g=(0,r.useMemo)((()=>void 0!==e.editable?e.editable:i),[i,e.editable]);return(0,n.jsxs)(F,{children:[(0,n.jsx)(y.Grow,Object.assign({in:!d,exit:!1,timeout:400,unmountOnExit:!0},{children:(0,n.jsxs)("div",{children:[g&&(0,n.jsx)(y.IconButton,Object.assign({size:"small",onClick:a},{children:(0,n.jsx)(W(),{})})),h&&(0,n.jsx)(y.IconButton,Object.assign({size:"small",onClick:u},{children:(0,n.jsx)(P(),{})}))]})})),(0,n.jsx)(y.Slide,Object.assign({in:d,direction:"rtl"===s?"right":"left",unmountOnExit:!0,timeout:400,exit:!1},{children:(0,n.jsxs)("div",{children:[(0,n.jsx)(y.Button,Object.assign({className:"delete",size:"small",onClick:u},{children:l.form.delete.toUpperCase()})),(0,n.jsx)(y.Button,Object.assign({className:"cancel",size:"small",onClick:()=>c(!1)},{children:l.form.cancel.toUpperCase()}))]})}))]})};const N=({event:e,multiday:t,hasPrev:s,hasNext:i,showdate:o})=>{const{triggerDialog:l,onDelete:d,onConfirm:c,events:u,handleState:h,triggerLoading:g,viewerExtraComponent:p,fields:v,direction:f,resources:x,resourceFields:O,locale:_,viewerTitleComponent:k,editable:M,deletable:T,hourFormat:S,eventRenderer:F,view:E,draggable:$}=m(),[P,H]=(0,r.useState)(null),[W,N]=(0,r.useState)(!1),B=(0,y.useTheme)(),q="12"===S?"hh:mm a":"HH:mm",z="rtl"===f?b():j(),A="rtl"===f?j():b(),L=e=>{!e&&W&&N(!1),H(e||null)},V=()=>{return t=void 0,n=void 0,a=function*(){try{g(!0);let t=e.event_id;if("function"==typeof d){const e=yield d(t);t=e||""}if(t){const e=u.filter((e=>e.event_id!==t));h(e,"events"),L()}}catch(e){console.error(e)}finally{g(!1)}},new((r=void 0)||(r=Promise))((function(e,s){function i(e){try{l(a.next(e))}catch(e){s(e)}}function o(e){try{l(a.throw(e))}catch(e){s(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(i,o)}l((a=a.apply(t,n||[])).next())}));var t,n,r,a};let G=(0,n.jsxs)("div",Object.assign({style:{padding:2}},{children:[(0,n.jsx)(y.Typography,Object.assign({variant:"subtitle2",style:{fontSize:12},noWrap:!0},{children:e.title})),o&&(0,n.jsx)(y.Typography,Object.assign({style:{fontSize:11},noWrap:!0},{children:`${(0,a.format)(e.start,q,{locale:_})} - ${(0,a.format)(e.end,q,{locale:_})}`}))]}));t&&(G=(0,n.jsxs)("div",Object.assign({style:{padding:2,display:"flex",alignItems:"center",justifyContent:"space-between"}},{children:[(0,n.jsx)(y.Typography,Object.assign({sx:{fontSize:11},noWrap:!0},{children:s?(0,n.jsx)(A,{fontSize:"small",sx:{display:"flex"}}):o&&(0,a.format)(e.start,q,{locale:_})})),(0,n.jsx)(y.Typography,Object.assign({variant:"subtitle2",align:"center",sx:{fontSize:12},noWrap:!0},{children:e.title})),(0,n.jsx)(y.Typography,Object.assign({sx:{fontSize:11},noWrap:!0},{children:i?(0,n.jsx)(z,{fontSize:"small",sx:{display:"flex"}}):o&&(0,a.format)(e.end,q,{locale:_})}))]})));const K=(0,r.useMemo)((()=>{let n=G;if("function"==typeof F&&!t&&"month"!==E){const t=F(e);t&&(n=t)}return n}),[]),U=(0,r.useMemo)((()=>{if(e.disabled)return!1;let t=void 0===$||$;return void 0!==e.draggable&&(t=e.draggable),t}),[]);return(0,n.jsxs)(r.Fragment,{children:[(0,n.jsx)(y.Paper,Object.assign({style:{width:"100%",height:"100%",display:"block",background:e.disabled?"#d0d0d0":e.color||B.palette.primary.main,color:e.disabled?"#808080":B.palette.primary.contrastText,cursor:e.disabled?"not-allowed":"pointer",overflow:"hidden"}},{children:(0,n.jsx)(y.ButtonBase,Object.assign({onClick:e=>{e.preventDefault(),e.stopPropagation(),L(e.currentTarget)},disabled:e.disabled,style:{width:"100%",height:"100%",display:"block"}},{children:(0,n.jsx)("div",Object.assign({style:{height:"100%"},draggable:U,onDragStart:t=>{t.stopPropagation(),t.dataTransfer.setData("text/plain",`${e.event_id}`),t.currentTarget.style.backgroundColor=B.palette.error.main},onDragEnd:t=>{t.currentTarget.style.backgroundColor=e.color||B.palette.primary.main},onDragOver:e=>{e.stopPropagation(),e.preventDefault()},onDragEnter:e=>{e.stopPropagation(),e.preventDefault()}},{children:K}))}))})),(0,n.jsx)(y.Popover,Object.assign({open:Boolean(P),anchorEl:P,onClose:()=>{L()},anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},onClick:e=>{e.stopPropagation()}},{children:(()=>{const t=O.idField,r=x.filter((n=>Array.isArray(e[t])?e[t].includes(n[t]):n[t]===e[t]));return!("function"==typeof c)||null==e||e.readOnly,"function"!=typeof d||null==e||e.readOnly,(0,n.jsxs)(I,{children:[(0,n.jsxs)("div",Object.assign({style:{background:e.color||B.palette.primary.main,color:B.palette.primary.contrastText}},{children:[(0,n.jsxs)("div",Object.assign({className:"rs__popper_actions"},{children:[(0,n.jsx)("div",{children:(0,n.jsx)(y.IconButton,Object.assign({size:"small",onClick:()=>{L()}},{children:(0,n.jsx)(D(),{color:"disabled"})}))}),(0,n.jsx)(R,{event:e,onDelete:V,onEdit:()=>{L(),l(!0,e)},direction:f,deletable:T,editable:M})]})),k instanceof Function?k(e):(0,n.jsx)(y.Typography,Object.assign({style:{padding:"5px 0"},noWrap:!0},{children:e.title}))]})),(0,n.jsxs)("div",Object.assign({style:{padding:"5px 10px"}},{children:[(0,n.jsxs)(y.Typography,Object.assign({style:{display:"flex",alignItems:"center"},color:"textSecondary",variant:"caption",noWrap:!0},{children:[(0,n.jsx)(w(),{})," ",`${(0,a.format)(e.start,`dd MMMM yyyy ${q}`,{locale:_})} - ${(0,a.format)(e.end,`dd MMMM yyyy ${q}`,{locale:_})}`]})),r.length>0&&(0,n.jsxs)(y.Typography,Object.assign({style:{display:"flex",alignItems:"center"},color:"textSecondary",variant:"caption",noWrap:!0},{children:[(0,n.jsx)(C(),{})," ",r.map((e=>e[O.textField])).join(", ")]})),p instanceof Function?p(v,e):p]}))]})})()}))]})};N.defaultProps={multiday:!1,showdate:!0};const B=N,q=({resource:e})=>{const{recourseHeaderComponent:t,resourceFields:a,resources:s,direction:i,resourceViewMode:o}=m(),{width:l}=function(){const[e,t]=(0,r.useState)({width:0,height:0});return(0,r.useEffect)((()=>{if("undefined"==typeof window)return;const e=()=>{t((e=>{const{innerWidth:t,innerHeight:n}=window;return e.width!==t||e.height!==n?{width:t,height:n}:e}))};return e(),window.addEventListener("resize",e,{capture:!1,passive:!0}),()=>{window.removeEventListener("resize",e)}}),[]),e}();if(t instanceof Function)return t(e);const d=e[a.textField],c=e[a.subTextField||""],u=e[a.avatarField||""],h=e[a.colorField||""],g="tabs"===o?{}:{borderColor:"#eee",borderStyle:"solid",borderWidth:"1px 1px 0 1px"};return(0,n.jsxs)(y.ListItem,Object.assign({sx:Object.assign({padding:"2px 10px",textAlign:"rtl"===i?"right":"left"},g),component:"span"},{children:[(0,n.jsx)(y.ListItemAvatar,{children:(0,n.jsx)(y.Avatar,{style:{background:h},alt:d,src:u})}),(0,n.jsx)(y.ListItemText,{primary:(0,n.jsx)(y.Typography,Object.assign({variant:"body2",noWrap:!0},{children:d})),secondary:(0,n.jsx)(y.Typography,Object.assign({variant:"caption",color:"textSecondary",noWrap:!0},{children:c})),style:{width:l/(s.length+1)}})]}))},z=require("prop-types");var A=e.n(z);const L=require("@mui/material/styles");function V(e){const{children:t,value:r,index:a}=e,s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["children","value","index"]);return r===a?(0,n.jsx)(y.Box,Object.assign({},s,{children:t})):(0,n.jsx)(n.Fragment,{})}V.propTypes={children:A().node,index:A().any.isRequired,value:A().any.isRequired};const G=(0,L.styled)("div")((({theme:e})=>({flexGrow:1,width:"100%",backgroundColor:e.palette.background.paper,alignSelf:"center","& .tabs":{borderColor:"#eee",borderStyle:"solid",borderWidth:"1px 1px 0 1px","& button.MuiTab-root":{borderRight:"1px solid #eee"}},"& .primary":{background:e.palette.primary.main},"& .secondary":{background:e.palette.secondary.main},"& .error":{background:e.palette.error.main},"& .info":{background:e.palette.info.dark},"& .text_primary":{color:e.palette.primary.main},"& .text_secondary":{color:e.palette.secondary.main},"& .text_error":{color:e.palette.error.main},"& .text_info":{color:e.palette.info.dark}}))),K=({tabs:e,variant:t,tab:r,setTab:a,indicator:s,style:i})=>(0,n.jsxs)(G,Object.assign({style:i},{children:[(0,n.jsx)(y.Tabs,Object.assign({value:r,variant:t,scrollButtons:!0,className:"tabs",classes:{indicator:s}},{children:e.map(((e,t)=>{return(0,n.jsx)(y.Tab,Object.assign({label:e.label,value:e.id},{id:`scrollable-auto-tab-${r=e.id}`,"aria-controls":`scrollable-auto-tabpanel-${r}`},{onClick:()=>a(e.id),onDragEnter:()=>a(e.id)}),e.id||t);var r}))})),e.map(((e,t)=>e.component&&(0,n.jsx)(V,Object.assign({value:r,index:e.id},{children:e.component}),t)))]}));K.defaultProps={variant:"scrollable",indicator:"primary"};const U=({renderChildren:e})=>{const{resourceViewMode:t}=m();return"tabs"===t?(0,n.jsx)(X,{renderChildren:e}):(0,n.jsx)(Q,{renderChildren:e})},Q=({renderChildren:e})=>{const{resources:t,resourceFields:r}=m();return(0,n.jsx)(n.Fragment,{children:t.map(((t,a)=>(0,n.jsxs)("div",{children:[(0,n.jsx)(q,{resource:t}),e(t)]},`${t[r.idField]}_${a}`)))})},X=({renderChildren:e})=>{const{resources:t,resourceFields:r,selectedResource:a,handleState:s}=m(),i=t.map((t=>({id:t[r.idField],label:(0,n.jsx)(q,{resource:t}),component:(0,n.jsx)(n.Fragment,{children:e(t)})})));return(0,n.jsx)(K,{tabs:i,tab:a||t[0][r.idField],setTab:e=>{s(e,"selectedResource")},style:{display:"grid"}})};U.defaultProps={span:1};const Z=({day:e,start:t,end:r,resourceKey:a,resourceVal:s,cellRenderer:i,height:o,children:l})=>{const d=(({start:e,end:t,resourceKey:n,resourceVal:r})=>{const{triggerDialog:a,onDrop:s}=m(),i=(0,y.useTheme)();return{onClick:()=>{a(!0,{start:e,end:t,[n]:r})},onDragOver:e=>{e.currentTarget.style.backgroundColor=(0,y.alpha)(i.palette.secondary.main,.3),e.preventDefault()},onDragEnter:e=>{e.currentTarget.style.backgroundColor=(0,y.alpha)(i.palette.secondary.main,.3)},onDragLeave:e=>{e.currentTarget.style.backgroundColor=""},onDrop:t=>{t.preventDefault(),t.currentTarget.style.backgroundColor="";const a=t.dataTransfer.getData("text");s(a,e,n,r)},[n]:r}})({start:t,end:r,resourceKey:a,resourceVal:s});return i?i(Object.assign({day:e,start:t,end:r,height:o},d)):(0,n.jsx)(y.Button,Object.assign({fullWidth:!0},d,{children:l}))};function Y({today:e,startHour:t,step:n,minuteHeight:r}){const s=new Date,i=(0,a.differenceInMinutes)(s,(0,a.setHours)(e,t));return i*r+(i/n+1)}const J=e=>{const[t,a]=(0,r.useState)(Y(e));return(0,r.useEffect)((()=>{const t=setInterval((()=>a(Y(e))),6e4);return()=>clearInterval(t)}),[]),t<0?null:(0,n.jsx)(r.Fragment,{children:(0,n.jsxs)(E,Object.assign({style:{top:t}},{children:[(0,n.jsx)("div",{}),(0,n.jsx)("div",{})]}))})},ee=({todayEvents:e,today:t,startHour:s,step:i,minuteHeight:o,direction:l})=>{const d=[];return(0,n.jsxs)(r.Fragment,{children:[(0,a.isToday)(t)&&(0,n.jsx)(J,{today:t,startHour:s,step:i,minuteHeight:o}),e.map((r=>{const c=(0,a.differenceInMinutes)(r.end,r.start)*o,u=(0,a.differenceInMinutes)(r.start,(0,a.setHours)(t,s)),h=u*o+(u/i+1),g=((e,t)=>e.filter((e=>e.event_id!==t.event_id&&((0,a.isWithinInterval)((0,a.addMinutes)(t.start,1),{start:e.start,end:e.end})||(0,a.isWithinInterval)((0,a.addMinutes)(t.end,-1),{start:e.start,end:e.end})||(0,a.isWithinInterval)((0,a.addMinutes)(e.start,1),{start:t.start,end:t.end})||(0,a.isWithinInterval)((0,a.addMinutes)(e.end,-1),{start:t.start,end:t.end})))))(e,r),p=g.filter((e=>d.includes(e.event_id)));return d.push(r.event_id),(0,n.jsx)("div",Object.assign({className:"rs__event__item",style:{height:c,top:h,width:g.length?100/(g.length+1)+"%":"95%",["rtl"===l?"right":"left"]:p.length>0?`calc(100%/${p.length+1})`:""}},{children:(0,n.jsx)(B,{event:r})}),r.event_id)}))]})};var te=function(e,t,n,r){return new(n||(n=Promise))((function(a,s){function i(e){try{l(r.next(e))}catch(e){s(e)}}function o(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}l((r=r.apply(e,t||[])).next())}))};const ne=()=>{const{week:e,selectedDate:t,height:s,events:d,handleGotoDay:c,remoteEvents:u,getRemoteEvents:h,triggerLoading:g,handleState:p,resources:f,resourceFields:j,fields:x,direction:b,locale:O,hourFormat:w}=m(),{weekStartOn:_,weekDays:D,startHour:k,endHour:C,step:M,cellRenderer:T}=e,I=(0,a.startOfWeek)(t,{weekStartsOn:_}),F=D.map((e=>(0,a.addDays)(I,e))),E=(0,a.startOfDay)(F[0]),$=(0,a.endOfDay)(F[F.length-1]),P=(0,a.setMinutes)((0,a.setHours)(t,k),0),H=(0,a.setMinutes)((0,a.setHours)(t,C),0),W=(0,a.eachMinuteOfInterval)({start:P,end:H},{step:M}),R=l(s,W.length),N=o(R,M),q="12"===w?"hh:mm a":"HH:mm",z=(0,r.useCallback)((()=>te(void 0,void 0,void 0,(function*(){try{g(!0);const e=yield te(void 0,void 0,void 0,(function*(){return u?yield u(`?start=${E}&end=${$}`):yield h({start:E,end:$,view:"week"})}));Array.isArray(e)&&p(e,"events")}catch(e){throw e}finally{g(!1)}}))),[t,u,h]);(0,r.useEffect)((()=>{(u||h)instanceof Function&&z()}),[t,u,h]);const A=(e,t)=>{const r=(0,a.isSameDay)(E,t);return e.filter((e=>(0,a.differenceInDays)(e.end,e.start)>0&&F.some((t=>(0,a.isWithinInterval)(t,{start:(0,a.startOfDay)(e.start),end:(0,a.endOfDay)(e.end)}))))).filter((e=>(0,a.isBefore)(e.start,E)?r:(0,a.isSameDay)(e.start,t))).sort(((e,t)=>t.end.getTime()-e.end.getTime())).map(((s,i)=>{const o=(0,a.isBefore)((0,a.startOfDay)(s.start),E),l=(0,a.isAfter)((0,a.endOfDay)(s.end),$),d=(0,a.differenceInDays)(l?$:s.end,o?E:s.start)+1,c=e.filter((e=>!r&&e.event_id!==s.event_id&&(0,a.isWithinInterval)(t,{start:e.start,end:e.end})));let u=i;return c.length&&(u+=c.length),(0,n.jsx)("div",Object.assign({className:"rs__multi_day",style:{top:28*u+45,width:100*d+"%"}},{children:(0,n.jsx)(B,{event:s,hasPrev:o,hasNext:l,multiday:!0})}),s.event_id)}))},L=e=>{let t=d;e&&(t=i(d,e,j,x));const s=28*d.filter((e=>(0,a.differenceInDays)(e.end,e.start)>0&&F.some((t=>(0,a.isWithinInterval)(t,{start:(0,a.startOfDay)(e.start),end:(0,a.endOfDay)(e.end)}))))).length+45;return(0,n.jsxs)(S,Object.assign({days:F.length},{children:[(0,n.jsx)("span",{className:"rs__cell"}),F.map(((e,r)=>(0,n.jsxs)("span",Object.assign({className:"rs__cell rs__header "+((0,a.isToday)(e)?"rs__today_cell":""),style:{height:s}},{children:[(0,n.jsx)(v,{date:e,onClick:c,locale:O}),A(t,e)]}),r))),W.map(((s,i)=>(0,n.jsxs)(r.Fragment,{children:[(0,n.jsx)("span",Object.assign({style:{height:R},className:"rs__cell rs__header rs__time"},{children:(0,n.jsx)(y.Typography,Object.assign({variant:"caption"},{children:(0,a.format)(s,q,{locale:O})}))})),F.map(((r,o)=>{const l=new Date(`${(0,a.format)(r,"yyyy/MM/dd")} ${(0,a.format)(s,q)}`),d=new Date(`${(0,a.format)(r,"yyyy/MM/dd")} ${(0,a.format)((0,a.addMinutes)(s,M),q)}`),c=j.idField;return(0,n.jsxs)("span",Object.assign({className:"rs__cell "+((0,a.isToday)(r)?"rs__today_cell":"")},{children:[0===i&&(0,n.jsx)(ee,{todayEvents:t.filter((e=>(0,a.isSameDay)(r,e.start)&&!(0,a.differenceInDays)(e.end,e.start))).sort(((e,t)=>e.end.getTime()-t.end.getTime())),today:r,minuteHeight:N,startHour:k,step:M,direction:b}),(0,n.jsx)(Z,{start:l,end:d,day:r,height:R,resourceKey:c,resourceVal:e?e[c]:null,cellRenderer:T})]}),o)}))]},i)))]}))};return f.length?(0,n.jsx)(U,{renderChildren:L}):L()},re=require("@mui/x-date-pickers/LocalizationProvider"),ae=require("@mui/x-date-pickers/AdapterDateFns"),se=({children:e})=>{const{locale:t}=m();return(0,n.jsx)(re.LocalizationProvider,Object.assign({dateAdapter:ae.AdapterDateFns,adapterLocale:t},{children:e}))},ie=require("@mui/x-date-pickers/DatePicker"),oe=require("@mui/icons-material/NavigateBeforeRounded");var le=e.n(oe);const de=require("@mui/icons-material/NavigateNextRounded");var ce=e.n(de);const ue=({type:e,onClick:t})=>{const{direction:r}=m();let a=ce();return"prev"===e?a="rtl"===r?ce():le():"next"===e&&(a="rtl"===r?le():ce()),(0,n.jsx)(y.IconButton,Object.assign({style:{padding:2},onClick:t,onDragOver:e=>{e.preventDefault(),t&&t()}},{children:(0,n.jsx)(a,{})}))},he=({selectedDate:e,onChange:t,weekProps:s})=>{const{locale:i}=m(),[o,l]=(0,r.useState)(!1),{weekStartOn:d}=s,c=(0,a.startOfWeek)(e,{weekStartsOn:d}),u=(0,a.endOfWeek)(e,{weekStartsOn:d}),h=()=>l(!o);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ue,{type:"prev",onClick:()=>{const e=(0,a.addDays)(c,-1);t(e,"selectedDate")}}),(0,n.jsx)(se,{children:(0,n.jsx)(ie.DatePicker,{open:o,onClose:h,openTo:"day",views:["month","day"],value:e,onChange:e=>{t(e||new Date,"selectedDate")},renderInput:e=>(0,n.jsx)(y.Button,Object.assign({ref:e.inputRef,style:{padding:4},onClick:h},{children:`${(0,a.format)(c,"dd",{locale:i})} - ${(0,a.format)(u,"dd MMMM yyyy",{locale:i})}`}))})}),(0,n.jsx)(ue,{type:"next",onClick:()=>{const e=(0,a.addDays)(u,1);t(e,"selectedDate")}})]})},ge=({selectedDate:e,onChange:t})=>{const{locale:s}=m(),[i,o]=(0,r.useState)(!1),l=()=>o(!i);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ue,{type:"prev",onClick:()=>{const n=(0,a.addDays)(e,-1);t(n,"selectedDate")}}),(0,n.jsx)(se,{children:(0,n.jsx)(ie.DatePicker,{open:i,onClose:l,openTo:"day",views:["month","day"],value:e,onChange:e=>{t(e||new Date,"selectedDate")},renderInput:t=>(0,n.jsx)(y.Button,Object.assign({ref:t.inputRef,style:{padding:4},onClick:l},{children:`${(0,a.format)(e,"dd, MMMM yyyy",{locale:s})}`}))})}),(0,n.jsx)(ue,{type:"next",onClick:()=>{const n=(0,a.addDays)(e,1);t(n,"selectedDate")}})]})},pe=({selectedDate:e,onChange:t})=>{const{locale:s}=m(),[i,o]=(0,r.useState)(!1),l=(0,a.getMonth)(e),d=()=>o(!i);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ue,{type:"prev",onClick:()=>{const n=l-1;t((0,a.setMonth)(e,n),"selectedDate")}}),(0,n.jsx)(se,{children:(0,n.jsx)(ie.DatePicker,{open:i,onClose:d,openTo:"month",views:["year","month"],value:e,onChange:e=>{t(e||new Date,"selectedDate")},renderInput:t=>(0,n.jsx)(y.Button,Object.assign({ref:t.inputRef,style:{padding:4},onClick:d},{children:(0,a.format)(e,"MMMM yyyy",{locale:s})}))})}),(0,n.jsx)(ue,{type:"next",onClick:()=>{const n=l+1;t((0,a.setMonth)(e,n),"selectedDate")}})]})},ye=require("@mui/icons-material/MoreVert");var ve=e.n(ye);const me=()=>{const{selectedDate:e,view:t,week:a,handleState:s,getViews:i,translations:o,extraAction:l}=m(),[d,c]=(0,r.useState)(null),u=(0,y.useTheme)(),h=(0,y.useMediaQuery)(u.breakpoints.up("sm")),g=i(),p=e=>{c(e||null)},v=()=>{switch(t){case"month":return(0,n.jsx)(pe,{selectedDate:e,onChange:s});case"week":return(0,n.jsx)(he,{selectedDate:e,onChange:s,weekProps:a});case"day":return(0,n.jsx)(ge,{selectedDate:e,onChange:s});default:return""}};return(0,n.jsxs)("div",Object.assign({style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},{children:[(0,n.jsx)("div",Object.assign({"data-testid":"date-navigator"},{children:l||v()})),(0,n.jsxs)("div",Object.assign({"data-testid":"view-navigator",style:{display:"flex",alignItems:"center"}},{children:[(0,n.jsx)("div",Object.assign({style:{marginRight:32}},{children:(0,n.jsx)(y.Button,Object.assign({onClick:()=>s(new Date,"selectedDate")},{children:o.navigation.today}))})),Boolean(l)&&v(),g.length>1&&(h?g.map((e=>(0,n.jsx)(y.Button,Object.assign({color:e===t?"primary":"inherit",onClick:()=>s(e,"view"),onDragOver:t=>{t.preventDefault(),s(e,"view")}},{children:o.navigation[e]}),e))):(0,n.jsxs)(r.Fragment,{children:[(0,n.jsx)(y.IconButton,Object.assign({style:{padding:5},onClick:e=>{p(e.currentTarget)}},{children:(0,n.jsx)(ve(),{})})),(0,n.jsx)(y.Popover,Object.assign({open:Boolean(d),anchorEl:d,onClose:()=>{p()},anchorOrigin:{vertical:"center",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},{children:(0,n.jsx)(y.MenuList,Object.assign({autoFocusItem:!!d,disablePadding:!0},{children:g.map((e=>(0,n.jsx)(y.MenuItem,Object.assign({selected:e===t,onClick:()=>{p(),s(e,"view")}},{children:o.navigation[e]}),e)))}))}))]}))]}))]}))},fe=require("@mui/x-date-pickers/DateTimePicker"),je=({type:e,value:t,label:r,name:a,onChange:s,variant:i,error:o,errMsg:l})=>{const d="date"===e?ie.DatePicker:fe.DateTimePicker;return(0,n.jsx)(se,{children:(0,n.jsx)(d,{value:t,label:r,onChange:e=>s(a,new Date(e||"")),minutesStep:5,renderInput:e=>(0,n.jsx)(y.TextField,Object.assign({variant:i,helperText:o?l:"",error:o,style:{width:"100%"}},e))})})};je.defaultProps={type:"datetime",variant:"outlined"};const xe=({variant:e,label:t,placeholder:a,value:s,name:i,required:o,min:l,max:d,email:c,decimal:u,onChange:h,disabled:g,multiline:p,rows:v,touched:m})=>{const[f,j]=(0,r.useState)({touched:!1,valid:!1,errorMsg:""});(0,r.useEffect)((()=>{m&&x(s)}),[m]);const x=e=>{const t=e;let n=!0,r="";c&&(n=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)&&n,r="Invalid Email"),u&&(n=/^[0-9]+(\.[0-9]*)?$/.test(t)&&n,r="Only Numbers Allowed"),l&&`${t}`.trim().length<l&&(n=!1,r=`Minimum ${l} letters`),d&&`${t}`.trim().length>d&&(n=!1,r=`Maximum ${d} letters`),o&&`${t}`.trim().length<=0&&(n=!1,r="Required"),j({touched:!0,valid:n,errorMsg:r}),h(i,t,n)};return(0,n.jsx)(y.TextField,{variant:e,label:t&&(0,n.jsx)(y.Typography,Object.assign({variant:"body2"},{children:`${t} ${o?"*":""}`})),value:s,name:i,onChange:e=>x(e.target.value),disabled:g,error:f.touched&&!f.valid,helperText:f.touched&&!f.valid&&f.errorMsg,multiline:p,rows:v,style:{width:"100%"},InputProps:{placeholder:a||""}})};xe.defaultProps={variant:"outlined"};const be=require("@mui/icons-material/ExpandMore");var Oe=e.n(be);const we=({options:e,value:t,name:a,required:s,onChange:i,label:o,disabled:l,touched:d,variant:c,loading:u,multiple:h,placeholder:g,errMsg:p})=>{const v=(0,y.useTheme)(),[m,f]=(0,r.useState)({touched:!1,valid:!!t,errorMsg:p||(s?"Required":void 0)});(0,r.useEffect)((()=>{d&&j(t)}),[d]);const j=e=>{const t=e;let n=!0,r=p;!s||(h?t.length:t)||(n=!1,r="Required"),f((e=>Object.assign(Object.assign({},e),{touched:!0,valid:n,errorMsg:r}))),i(a,t,n)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(y.FormControl,Object.assign({variant:c||"outlined",fullWidth:!0,error:s&&m.touched&&!m.valid,disabled:l},{children:[o&&(0,n.jsx)(y.InputLabel,Object.assign({id:`input_${a}`},{children:(0,n.jsx)(y.Typography,Object.assign({variant:"body2"},{children:`${o} ${s?"*":""}`}))})),(0,n.jsxs)(y.Select,Object.assign({label:o,labelId:`input_${a}`,value:t,onBlur:()=>{m.touched||f((e=>Object.assign(Object.assign({},e),{touched:!0,errorMsg:p||e.errorMsg})))},onChange:e=>j(e.target.value),IconComponent:u?()=>(0,n.jsx)(y.CircularProgress,{size:5}):Oe(),multiple:!!h,classes:{select:"chips"===h?"flex__wrap":void 0},renderValue:t=>{if(!t||0===t.length)return(0,n.jsx)("em",{children:o});const r=[];if(h){for(const n of e)t.includes(n.value)&&r.push([n.text]);return"chips"===h?r.map(((e,t)=>(0,n.jsx)(y.Chip,{label:e,style:{margin:"0 2px"},color:"primary"},`${e}_${t}`))):r.join(",")}for(const n of e)t===n.value&&r.push([n.text]);return r.join(",")}},{children:[g&&(0,n.jsx)(y.MenuItem,Object.assign({value:""},{children:(0,n.jsx)("em",{children:g})})),e.map((e=>(0,n.jsxs)(y.MenuItem,Object.assign({value:e.value},{children:[h&&(0,n.jsx)(y.Checkbox,{checked:t.indexOf(e.value)>-1,color:"primary"}),e.text]}),e.id||e.value)))]}))]})),(0,n.jsx)(y.FormHelperText,Object.assign({style:{color:v.palette.error.main}},{children:m.touched&&!m.valid&&m.errorMsg}))]})};we.defaultProps={variant:"outlined"};const _e=(e,t)=>{var n;const r={};for(const a of e){const e=s(a,a.default,t),i=s(a,null==t?void 0:t[a.name],t);r[a.name]={value:i.value||e.value||"",validity:!(null===(n=a.config)||void 0===n?void 0:n.required)||!!i.validity||!!e.validity,type:a.type,config:a.config}}return Object.assign({event_id:{value:(null==t?void 0:t.event_id)||null,validity:!0,type:"hidden"},title:{value:(null==t?void 0:t.title)||"",validity:!!(null==t?void 0:t.title),type:"input",config:{label:"Title",required:!0,min:3}},start:{value:(null==t?void 0:t.start)||new Date,validity:!0,type:"date",config:{label:"Start",sm:6}},end:{value:(null==t?void 0:t.end)||new Date,validity:!0,type:"date",config:{label:"End",sm:6}}},r)},De=()=>{const{fields:e,dialog:t,triggerDialog:s,selectedRange:i,selectedEvent:o,triggerLoading:l,onConfirm:d,customEditor:c,confirmEvent:u,dialogMaxWidth:h,translations:g}=m(),[p,v]=(0,r.useState)(_e(e,o||i)),[f,j]=(0,r.useState)(!1),x=(0,y.useTheme)(),b=(0,y.useMediaQuery)(x.breakpoints.down("sm")),O=(e,t,n)=>{v((r=>Object.assign(Object.assign({},r),{[e]:Object.assign(Object.assign({},r[e]),{value:t,validity:n})})))},w=t=>{t&&v(_e(e)),s(!1)},_=()=>{return e=void 0,t=void 0,r=function*(){let e={};for(const t in p)if(e[t]=p[t].value,!c&&!p[t].validity)return j(!0);try{l(!0),e.end=e.start>=e.end?(0,a.addMinutes)(e.start,(0,a.differenceInMinutes)(null==i?void 0:i.end,null==i?void 0:i.start)):e.end;const t=(null==o?void 0:o.event_id)?"edit":"create";"function"==typeof d?e=yield d(e,t):e.event_id=(null==o?void 0:o.event_id)||Date.now().toString(36)+Math.random().toString(36).slice(2),u(e,t),w(!0)}catch(e){console.error(e)}finally{l(!1)}},new((n=void 0)||(n=Promise))((function(a,s){function i(e){try{l(r.next(e))}catch(e){s(e)}}function o(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}l((r=r.apply(e,t||[])).next())}));var e,t,n,r},D=t=>{var r,a,s;const i=p[t];switch(i.type){case"input":return(0,n.jsx)(xe,Object.assign({value:i.value,name:t,onChange:O,touched:f},i.config,{label:g.event[t]||(null===(r=i.config)||void 0===r?void 0:r.label)}));case"date":return(0,n.jsx)(je,Object.assign({value:i.value,name:t,onChange:(...e)=>O(...e,!0)},i.config,{label:g.event[t]||(null===(a=i.config)||void 0===a?void 0:a.label)}));case"select":const o=e.find((e=>e.name===t));return(0,n.jsx)(we,Object.assign({value:i.value,name:t,options:(null==o?void 0:o.options)||[],onChange:O,touched:f},i.config,{label:g.event[t]||(null===(s=i.config)||void 0===s?void 0:s.label)}));default:return""}};return(0,n.jsx)(y.Dialog,Object.assign({open:t,fullScreen:b,maxWidth:h},{children:c?c({state:p,close:()=>s(!1),loading:e=>l(e),edited:o,onConfirm:u}):(0,n.jsxs)(r.Fragment,{children:[(0,n.jsx)(y.DialogTitle,{children:o?g.form.editTitle:g.form.addTitle}),(0,n.jsx)(y.DialogContent,Object.assign({style:{overflowX:"hidden"}},{children:(0,n.jsx)(y.Grid,Object.assign({container:!0,spacing:1},{children:Object.keys(p).map((e=>{var t;const r=p[e];return(0,n.jsx)(y.Grid,Object.assign({item:!0,sm:null===(t=r.config)||void 0===t?void 0:t.sm,xs:12},{children:D(e)}),e)}))}))})),(0,n.jsxs)(y.DialogActions,{children:[(0,n.jsx)(y.Button,Object.assign({color:"inherit",fullWidth:!0,onClick:()=>w()},{children:g.form.cancel})),(0,n.jsx)(y.Button,Object.assign({color:"primary",fullWidth:!0,onClick:_},{children:g.form.confirm}))]})]})}))},ke=({events:e,today:t,eachWeekStart:s,daysList:i,onViewMore:o,cellHeight:l})=>{const d=Math.round((l-27)/28-1),{translations:c}=m(),u=s.some((e=>(0,a.isSameDay)(e,t)))?t:null,h=e.filter((e=>!(!u||!(0,a.isWithinInterval)(u,{start:(0,a.startOfDay)(e.start),end:(0,a.endOfDay)(e.end)}))||(0,a.isSameDay)(e.start,t))).sort(((e,t)=>t.end.getTime()-e.end.getTime()));return(0,n.jsx)(r.Fragment,{children:h.map(((r,l)=>{const g=!!u&&(0,a.isBefore)(r.start,u),p=g&&u?u:r.start;let v=(0,a.differenceInDays)(r.end,p)+1;const m=v>=i.length;if(m){const e=(0,a.startOfWeek)(r.start),t=(0,a.closestTo)(e,s);t&&(v=i.length-(u?0:(0,a.differenceInDays)(r.start,t)))}const f=e.filter((e=>!u&&e.event_id!==r.event_id&&d>l&&(0,a.isBefore)(e.start,(0,a.startOfDay)(t))&&(0,a.isAfter)(e.end,(0,a.startOfDay)(t))));let j=l;f.length&&(j+=f.length);const x=28*j+27;return j>d?"":j===d?(0,n.jsx)(y.Typography,Object.assign({width:"100%",className:"rs__multi_day rs__hover__op",style:{top:x,fontSize:11},onClick:e=>{e.stopPropagation(),o(r.start)}},{children:`${Math.abs(h.length-l)} ${c.moreEvents}`}),l):(0,n.jsx)("div",Object.assign({className:"rs__multi_day",style:{top:x,width:100*v+"%"}},{children:(0,n.jsx)(B,{event:r,showdate:!1,multiday:(0,a.differenceInDays)(r.end,r.start)>0,hasPrev:g,hasNext:m})}),l)}))})};var Ce=function(e,t,n,r){return new(n||(n=Promise))((function(a,s){function i(e){try{l(r.next(e))}catch(e){s(e)}}function o(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}l((r=r.apply(e,t||[])).next())}))};const Me=()=>{const{month:e,selectedDate:t,height:s,events:o,handleGotoDay:l,remoteEvents:d,getRemoteEvents:c,triggerLoading:u,handleState:h,resources:g,resourceFields:p,fields:v,locale:f,hourFormat:j}=m(),{weekStartOn:x,weekDays:b,startHour:O,endHour:w,cellRenderer:_}=e,D=(0,a.startOfMonth)(t),k=(0,a.endOfMonth)(t),C=(0,a.eachWeekOfInterval)({start:D,end:k},{weekStartsOn:x}),M="12"===j?"hh:mm a":"HH:mm",T=b.map((e=>(0,a.addDays)(C[0],e))),I=s/C.length,F=(0,y.useTheme)(),E=(0,r.useCallback)((()=>Ce(void 0,void 0,void 0,(function*(){try{u(!0);const e=C[0],t=(0,a.addDays)(C[C.length-1],T.length),n=yield Ce(void 0,void 0,void 0,(function*(){return d?yield d(`?start=${e}&end=${t}`):yield c({start:e,end:t,view:"month"})}));n&&(null==n?void 0:n.length)&&h(n,"events")}catch(e){throw e}finally{u(!1)}}))),[t,d,c]);(0,r.useEffect)((()=>{(d||c)instanceof Function&&E()}),[E]);const $=e=>{let s=o;e&&(s=i(o,e,p,v));const d=[];for(const i of C){const o=b.map((o=>{const d=(0,a.addDays)(i,o),c=new Date(`${(0,a.format)((0,a.setHours)(d,O),`yyyy/MM/dd ${M}`)}`),u=new Date(`${(0,a.format)((0,a.setHours)(d,w),`yyyy/MM/dd ${M}`)}`),h=p.idField;return(0,n.jsxs)("span",Object.assign({style:{height:I},className:"rs__cell"},{children:[(0,n.jsx)(Z,{start:c,end:u,day:t,height:I,resourceKey:h,resourceVal:e?e[h]:null,cellRenderer:_}),(0,n.jsxs)(r.Fragment,{children:[(0,n.jsx)(y.Avatar,Object.assign({style:{width:27,height:27,position:"absolute",top:0,background:(0,a.isToday)(d)?F.palette.secondary.main:"transparent",color:(0,a.isToday)(d)?F.palette.secondary.contrastText:"",marginBottom:2}},{children:(0,n.jsx)(y.Typography,Object.assign({color:(0,a.isSameMonth)(d,D)?"textPrimary":"#ccc",className:"rs__hover__op",onClick:e=>{e.stopPropagation(),l(d)}},{children:(0,a.format)(d,"dd")}))})),(0,n.jsx)(ke,{events:s,today:d,eachWeekStart:C,daysList:T,onViewMore:l,cellHeight:I})]})]}),o.toString())}));d.push((0,n.jsx)(r.Fragment,{children:o},i.toString()))}return d},P=e=>(0,n.jsxs)(S,Object.assign({days:T.length,indent:"0"},{children:[T.map(((e,t)=>(0,n.jsx)("span",Object.assign({className:"rs__cell rs__header"},{children:(0,n.jsx)(y.Typography,Object.assign({align:"center",variant:"body2"},{children:(0,a.format)(e,"EE",{locale:f})}))}),t))),$(e)]}));return g.length?(0,n.jsx)(U,{renderChildren:P}):P()};var Te=function(e,t,n,r){return new(n||(n=Promise))((function(a,s){function i(e){try{l(r.next(e))}catch(e){s(e)}}function o(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}l((r=r.apply(e,t||[])).next())}))};const Se=()=>{const{day:e,selectedDate:t,events:s,height:d,remoteEvents:c,getRemoteEvents:u,triggerLoading:h,handleState:g,resources:p,resourceFields:f,fields:j,direction:x,locale:b,hourFormat:O}=m(),{startHour:w,endHour:_,step:D,cellRenderer:k}=e,C=(0,a.setMinutes)((0,a.setHours)(t,w),0),M=(0,a.setMinutes)((0,a.setHours)(t,_),0),T=(0,a.eachMinuteOfInterval)({start:C,end:M},{step:D}),I=l(d,T.length),F=o(I,D),E="12"===O?"hh:mm a":"HH:mm",$=s.sort(((e,t)=>t.end.getTime()-e.end.getTime())),P=(0,r.useCallback)((()=>Te(void 0,void 0,void 0,(function*(){try{h(!0);const e=(0,a.addDays)(C,-1),t=(0,a.addDays)(M,1),n=yield Te(void 0,void 0,void 0,(function*(){return c?yield c(`?start=${e}&end=${t}`):yield u({start:e,end:t,view:"day"})}));n&&(null==n?void 0:n.length)&&g(n,"events")}catch(e){throw e}finally{h(!1)}}))),[t,c,u]);(0,r.useEffect)((()=>{(c||u)instanceof Function&&P()}),[P]);const H=e=>{const r=e.filter((e=>(0,a.differenceInDays)(e.end,e.start)>0&&(0,a.isWithinInterval)(t,{start:(0,a.startOfDay)(e.start),end:(0,a.endOfDay)(e.end)})));return(0,n.jsx)("div",Object.assign({className:"rs__block_col",style:{height:28*r.length}},{children:r.map(((e,r)=>{const s=(0,a.isBefore)(e.start,(0,a.startOfDay)(t)),i=(0,a.isAfter)(e.end,(0,a.endOfDay)(t));return(0,n.jsx)("div",Object.assign({className:"rs__multi_day",style:{top:28*r,width:"100%"}},{children:(0,n.jsx)(B,{event:e,multiday:!0,hasPrev:s,hasNext:i})}),e.event_id)}))}))},W=e=>{let o=$;e&&(o=i($,e,f,j));const l=28*s.filter((e=>(0,a.differenceInDays)(e.end,e.start)>0&&(0,a.isWithinInterval)(t,{start:(0,a.startOfDay)(e.start),end:(0,a.endOfDay)(e.end)}))).length+45;return(0,n.jsxs)(S,Object.assign({days:1},{children:[(0,n.jsx)("span",{className:"rs__cell"}),(0,n.jsxs)("span",Object.assign({className:"rs__cell rs__header "+((0,a.isToday)(t)?"rs__today_cell":""),style:{height:l}},{children:[(0,n.jsx)(v,{date:t,locale:b}),H(o)]})),T.map(((s,i)=>{const l=new Date(`${(0,a.format)(t,"yyyy/MM/dd")} ${(0,a.format)(s,E)}`),d=new Date(`${(0,a.format)(t,"yyyy/MM/dd")} ${(0,a.format)((0,a.addMinutes)(s,D),E)}`),c=f.idField;return(0,n.jsxs)(r.Fragment,{children:[(0,n.jsx)("span",Object.assign({className:"rs__cell rs__header rs__time",style:{height:I}},{children:(0,n.jsx)(y.Typography,Object.assign({variant:"caption"},{children:(0,a.format)(s,E,{locale:b})}))})),(0,n.jsxs)("span",Object.assign({className:"rs__cell "+((0,a.isToday)(t)?"rs__today_cell":"")},{children:[0===i&&(0,n.jsx)(ee,{todayEvents:o.filter((e=>!(0,a.differenceInDays)(e.end,e.start)&&(0,a.isSameDay)(t,e.start))),today:C,minuteHeight:F,startHour:w,step:D,direction:x}),(0,n.jsx)(Z,{start:l,end:d,day:t,height:I,resourceKey:c,resourceVal:e?e[c]:null,cellRenderer:k})]}))]},i)}))]}))};return p.length?(0,n.jsx)(U,{span:2,renderChildren:W}):W()},Ie=()=>{const{loading:e,view:t,dialog:a,resources:s,resourceViewMode:i}=m(),o=(0,r.useMemo)((()=>{switch(t){case"month":return(0,n.jsx)(Me,{});case"week":return(0,n.jsx)(ne,{});case"day":return(0,n.jsx)(Se,{});default:return""}}),[t]);return(0,n.jsxs)(M,Object.assign({dialog:a?1:0,"data-testid":"rs-wrapper"},{children:[e&&(0,n.jsx)("div",Object.assign({className:"rs__table_loading"},{children:(0,n.jsxs)("span",{children:[(0,n.jsx)(y.CircularProgress,{size:50}),(0,n.jsx)(y.Typography,Object.assign({align:"center"},{children:"Loading..."}))]})})),(0,n.jsx)(me,{}),(0,n.jsx)("div",Object.assign({className:"rs__outer_table","data-testid":"grid"},{children:(0,n.jsx)(T,Object.assign({resource_count:"tabs"===i?1:s.length},{children:o}))})),a&&(0,n.jsx)(De,{})]}))},Fe=e=>(0,n.jsx)(p,Object.assign({initial:e},{children:(0,n.jsx)(Ie,{})}));Fe.defaultProps=u,module.exports=t})();